apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: trust-plane

resources:
- advocate.yaml
- ipfs.yaml  # You can comment this line if you are not willing to use the embeded ipfs and replace your desired ipfs.

images:
- name: git.tu-berlin.de:5000/teadal/advocate_pie:dev
  newName: git.tu-berlin.de:5000/teadal/advocate_pie
  newTag: teadal-node-dev-0.2
   
patches:
- target:
    kind: Deployment
    name: advocate
  patch: |-
    - op: add
      path: /spec/template/spec/hostAliases
      value:
      - ip: "131.175.120.210"
        hostnames:
        - "teadal.blockchain"


configMapGenerator:
- name: advocate-config
  literals:
  # Please replace the following values with the actual values of your deployment ...
  - ADVOCATE_IPFS_CONNECTION=http://ipfs.trust-plane.svc.cluster.local:5001/api/v0/ # modify if you use your own
  - ADVOCATE_JAEGER_QUERY_ADDRESS=tracing.istio-system.svc.cluster.local:16685 # should be always this based on teadal node setup
  - ADVOCATE_SELF_ADDRESSES=https://advocate.trust-plane.svc.cluster.local:8000,https://130.149.158.50:8000
  - ADVOCATE_PUBLIC_ADDRESS=https://130.149.158.50:8000
  - ADVOCATE_ETH_POA=1
  - ADVOCATE_ETH_GAS_PRICE=0
generatorOptions:
    disableNameSuffixHash: true
